{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>Xmas 2025</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kedebideri:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" rel="stylesheet">
    <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css">
    <script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>    
</head>
<body>
    <h1 class="h1_header text_black">Add item{% if person_name %} for {{ person_name }}{% endif %}</h1>

    {% if person_name %}
        <a href="{% url 'main_list:items' person_name=person_name %}">‚Üê Back to {{ person_name }}'s List</a>
    {% endif %}

    <form method="post" style="max-width: 500px; margin: 0 auto;" class="add-item-form">
        {% csrf_token %}
        
        <!-- Item name -->
        <label style="display: block; margin-bottom: 8px;">Item name</label>
        <input type="text" name="name" id="item-name" placeholder="Enter item name" required style="width: 100%; margin-bottom: 16px;">
        
        <!-- Tagged people -->
        <label style="display: block; margin-bottom: 8px;">For whom</label>
        <select name="tagged_people" id="tagged-people" multiple style="margin-bottom: 16px;">
            {% for person in people %}
                <option value="{{ person.id }}" {% if person.who == person_name %}selected{% endif %}>{{ person.who }}</option>
            {% endfor %}
        </select>
        
        <!-- Gift type -->
        <label style="display: block; margin-bottom: 8px;">Gift type</label>
        <select name="type_gift" id="gift-type" required style="margin-bottom: 16px;">
            <option value="">Select type...</option>
            <option value="stocking">Stocking</option>
            <option value="main">Main</option>
        </select>
        
        <!-- Price -->
        <label style="display: block; margin-bottom: 8px;">Price</label>
        <input type="number" step="0.01" name="price" id="price" placeholder="Enter price" required style="width: 100%; margin-bottom: 16px;">
        
        <!-- Submit button -->
        <button class="mdc-button mdc-button--raised" type="submit" style="width: 100%;">
            <span class="mdc-button__label">Add Item</span>
        </button>
    </form>

    <div class="home-bar">
        <a href="{% url 'main_list:index' %}">
            <div>üè†</div>
            <div>Home</div>
        </a>
        <a href="{% url 'main_list:add_item_general' %}">
            <div>‚ûï</div>
            <div>Add</div>
        </a>
        <a href="{% url 'main_list:calculator' %}">
            <div>üßÆ</div>
            <div>Calculator</div>
        </a>
    </div>

    <script>
        // Initialize Material text fields
        document.querySelectorAll('.mdc-text-field').forEach(el => {
            mdc.textField.MDCTextField.attachTo(el);
        });

        // Initialize Choices.js for selects
        new Choices('#gift-type', {
            searchEnabled: false,
            itemSelectText: '',
        });

        new Choices('#tagged-people', {
            removeItemButton: true,
            searchEnabled: true,
            placeholderValue: 'Select people...',
        });
    </script>
</body>
</html>